{
  "name": "single-note-lifecycle",
  "description": "Single note through attack → sustain → release → expiration",
  "config": {
    "partId": "default",
    "attackDurationMs": 50,
    "releaseWindowMs": 500
  },
  "steps": [
    {
      "t": 0,
      "input": {
        "t": 0,
        "source": "midi",
        "stream": "test",
        "inputs": [
          { "type": "midi_note_on", "t": 0, "note": 60, "velocity": 100, "channel": 0 }
        ]
      },
      "expected": {
        "noteCount": 1,
        "notes": [
          { "pitch": { "pc": 0, "octave": 4 }, "phase": "attack", "velocity": 100 }
        ],
        "dynamics": { "level": 0.7874015748031497, "trend": "stable" }
      }
    },
    {
      "t": 10,
      "input": {
        "t": 10,
        "source": "midi",
        "stream": "test",
        "inputs": []
      },
      "expected": {
        "noteCount": 1,
        "notes": [
          { "pitch": { "pc": 0, "octave": 4 }, "phase": "attack", "velocity": 100 }
        ],
        "dynamics": { "level": 0.7874015748031497, "trend": "stable" }
      }
    },
    {
      "t": 100,
      "input": {
        "t": 100,
        "source": "midi",
        "stream": "test",
        "inputs": []
      },
      "expected": {
        "noteCount": 1,
        "notes": [
          { "pitch": { "pc": 0, "octave": 4 }, "phase": "sustain", "velocity": 100 }
        ],
        "dynamics": { "level": 0.7874015748031497, "trend": "stable" }
      }
    },
    {
      "t": 200,
      "input": {
        "t": 200,
        "source": "midi",
        "stream": "test",
        "inputs": [
          { "type": "midi_note_off", "t": 200, "note": 60, "channel": 0 }
        ]
      },
      "expected": {
        "noteCount": 1,
        "notes": [
          { "pitch": { "pc": 0, "octave": 4 }, "phase": "release", "velocity": 100 }
        ],
        "dynamics": { "level": 0.23622047244094488, "trend": "stable" }
      }
    },
    {
      "t": 600,
      "input": {
        "t": 600,
        "source": "midi",
        "stream": "test",
        "inputs": []
      },
      "expected": {
        "noteCount": 1,
        "notes": [
          { "pitch": { "pc": 0, "octave": 4 }, "phase": "release", "velocity": 100 }
        ],
        "dynamics": { "level": 0.23622047244094488, "trend": "stable" }
      }
    },
    {
      "t": 710,
      "input": {
        "t": 710,
        "source": "midi",
        "stream": "test",
        "inputs": []
      },
      "expected": {
        "noteCount": 0,
        "notes": [],
        "dynamics": { "level": 0, "trend": "stable" }
      }
    }
  ]
}
